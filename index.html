<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Free Fire Likes Tool</title>
  <style>
    :root{
      --bg:#071025;
      --card: linear-gradient(145deg,#0f1724,#0b1220);
      --muted:#9aa8b8;
      --text:#e6eef6;
      --accent:#22d3ee;
      --accent-2:#38bdf8;
      --success:#22c55e;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", Arial;
      background:
        radial-gradient(700px 300px at 10% -20%, rgba(34,211,238,.05), transparent 40%),
        radial-gradient(500px 200px at 95% 0%, rgba(56,189,248,.03), transparent 40%),
        var(--bg);
      color:var(--text);
      display:grid;
      place-items:center;
      padding:28px;
    }
    .wrap{width:min(820px,100%);padding:18px}
    .card{
      background:var(--card);
      border-radius:14px;
      padding:22px;
      box-shadow:0 14px 40px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }
    header{display:flex;align-items:center;gap:14px}
    .logo{
      width:58px;height:58px;border-radius:12px;display:grid;place-items:center;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      color:#001018;font-weight:900;font-size:18px;
      box-shadow:0 6px 18px rgba(34,211,238,0.12);
      flex-shrink:0;
    }
    .logo svg{width:38px;height:38px;display:block}
    h1{margin:0;font-size:20px}
    .powered{color:var(--muted);font-size:13px;margin-top:4px;text-align:center}
    form{margin-top:18px}
    label{display:block;font-weight:700;margin:10px 0 6px;color:var(--muted);font-size:13px}
    input, select, button{
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.04);
      background:#06121b;color:var(--text);
      outline:none;font-size:15px;
      transition:box-shadow .18s ease, transform .06s ease;
    }
    input::placeholder{color:#7f8f9d}
    input:focus, select:focus{
      box-shadow: 0 6px 20px rgba(56,189,248,0.08);
      border-color: rgba(56,189,248,0.26);
    }
    .btn{
      margin-top:14px;display:inline-flex;align-items:center;justify-content:center;gap:10px;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#001018;border:none;padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer;
      position:relative;overflow:hidden;font-size:15px;
    }
    .btn:active{transform:translateY(1px)}
    .spinner{width:18px;height:18px;border-radius:50%;border:3px solid rgba(255,255,255,0.3);border-top-color:white;animation:spin .9s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);visibility:hidden;opacity:0;transition:.26s}
    .overlay.active{visibility:visible;opacity:1}
    .dialog{
      width:min(680px,94%);max-width:640px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:18px;border-radius:12px;box-shadow:0 18px 48px rgba(2,6,23,0.6);
      transform:translateY(-18px) scale(.99);opacity:0;transition:.32s;
    }
    .overlay.active .dialog{transform:translateY(0) scale(1);opacity:1}
    .dialog-header{display:flex;align-items:center;gap:12px;justify-content:center}
    .check{width:72px;height:72px;border-radius:50%;background:linear-gradient(180deg,var(--success),#66d07b);display:grid;place-items:center;box-shadow:0 10px 30px rgba(34,197,94,0.12);margin:6px auto}
    .check svg{width:40px;height:40px;fill:white}
    .dialog h2{margin:0;font-size:18px;text-align:center}
    .msg{background:#041019;border-radius:10px;padding:12px;font-size:15px;line-height:1.3;color:var(--text);border:1px solid rgba(255,255,255,0.03);margin-top:12px;text-align:justify}
    .msg.compact{font-size:14px;word-break:break-word}
    .dialog .actions{display:flex;justify-content:center;margin-top:14px;gap:10px}
    .dialog button{padding:8px 12px;border-radius:8px;cursor:pointer}
    .dialog button.close{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}
    .dialog button.ok{background:linear-gradient(90deg,var(--accent-2),#7be28a);color:#012006;border:none;font-weight:800}
    footer{text-align:center;color:var(--muted);font-size:13px;margin-top:14px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div class="logo">
          <svg viewBox="0 0 64 64"><rect x="0" y="0" width="64" height="64" rx="10" fill="url(#g1)"/></svg>
        </div>
        <div>
          <h1>Free Fire Likes Tool</h1>
          <div class="powered">powered by <strong>sheikh zada</strong></div>
        </div>
      </header>
      <form id="likeForm" autocomplete="off" style="margin-top:18px">
        <label for="uid">Enter UID</label>
        <input id="uid" name="uid" type="text" placeholder="e.g. 12345678" inputmode="numeric" required />
        <label for="region" style="margin-top:12px">Select Server</label>
        <select id="region" class="opt" name="region">
          <option value="PK">ðŸ‡µðŸ‡° Pakistan</option>
          <option value="IN">ðŸ‡®ðŸ‡³ India</option>
          <option value="BD">ðŸ‡§ðŸ‡© Bangladesh</option>
          <option value="BR">ðŸ‡§ðŸ‡· Brazil</option>
          <option value="SG">ðŸ‡¸ðŸ‡¬ Singapore</option>
          <option value="ID">ðŸ‡®ðŸ‡© Indonesia</option>
          <option value="US">ðŸ‡ºðŸ‡¸ United States</option>
        </select>
        <button id="submitBtn" class="btn" type="submit"><span id="btnText">Submit</span></button>
      </form>
      <footer>Â© <strong>sheikh zada</strong></footer>
    </div>
  </div>
  <div class="overlay" id="overlay">
    <div class="dialog">
      <div class="dialog-header" id="statusArea"></div>
      <div class="msg compact" id="messageBox">Waiting...</div>
      <div class="actions">
        <button class="close" id="closeBtn">Close</button>
        <button class="ok" id="okBtn">OK</button>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('likeForm');
    const uidInput = document.getElementById('uid');
    const regionSelect = document.getElementById('region');
    const submitBtn = document.getElementById('submitBtn');
    const btnText = document.getElementById('btnText');
    const overlay = document.getElementById('overlay');
    const messageBox = document.getElementById('messageBox');
    const statusArea = document.getElementById('statusArea');
    const closeBtn = document.getElementById('closeBtn');
    const okBtn = document.getElementById('okBtn');

    function setLoading(on){
      if(on){
        btnText.textContent = '';
        const sp = document.createElement('span'); sp.className = 'spinner'; sp.id='btnSpinner';
        submitBtn.appendChild(sp); submitBtn.disabled = true;
      } else {
        const sp = document.getElementById('btnSpinner'); if(sp) sp.remove();
        submitBtn.disabled = false; btnText.textContent = 'Submit';
      }
    }

    function showPopup(html, success=false){
      statusArea.innerHTML = success ? `<div class="check"><svg viewBox="0 0 24 24"><path d="M9 16.2 4.8 12 3.5 13.3 9 18.9 21 6.9 19.7 5.5z"/></svg></div>` : '';
      messageBox.innerHTML = html;
      overlay.classList.add('active');
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const uid = uidInput.value.trim();
      const region = regionSelect.value;
      if(!uid){showPopup("Enter valid UID");return;}
      setLoading(true);
      try{
        const res = await fetch("/api/send", {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify({ uid, region })
        });
        const data = await res.json();
        if(data.status===200){
          showPopup(`<strong>Nickname:</strong> ${data.nickname}<br><strong>Region:</strong> ${data.region}<br><strong>Likes:</strong> ${data.sent}`, true);
        }else if(data.status===404){
          showPopup("Player not found.");
        }else{
          showPopup("Error: "+(data.message||"Something went wrong"));
        }
      }catch(err){showPopup("Network error: "+err.message);}
      finally{setLoading(false);}
    });

    closeBtn.addEventListener('click', ()=>overlay.classList.remove('active'));
    okBtn.addEventListener('click', ()=>overlay.classList.remove('active'));
    overlay.addEventListener('click',(e)=>{if(e.target===overlay)overlay.classList.remove('active')});
    window.addEventListener('keydown',(e)=>{if(e.key==="Escape")overlay.classList.remove('active')});
  </script>
</body>
</html>
