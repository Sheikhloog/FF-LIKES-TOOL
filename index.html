<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Free Fire Likes Tool â€” Local</title>
<style>
:root{--bg:#071025;--card:linear-gradient(145deg,#0f1724,#0b1220);--muted:#9aa8b8;--text:#e6eef6;--accent:#22d3ee;--accent-2:#38bdf8;--success:#22c55e}
*{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:radial-gradient(700px 300px at 10% -20%,rgba(34,211,238,.05),transparent 40%),radial-gradient(500px 200px at 95% 0%,rgba(56,189,248,.03),transparent 40%),var(--bg);color:var(--text);display:grid;place-items:center;padding:28px}
.wrap{width:min(920px,100%);padding:18px}.card{background:var(--card);border-radius:14px;padding:22px;box-shadow:0 14px 40px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
header{display:flex;align-items:center;gap:14px}.logo{width:58px;height:58px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#001018;font-weight:900;font-size:18px;box-shadow:0 6px 18px rgba(34,211,238,0.12);flex-shrink:0}
h1{margin:0;font-size:20px}.powered{color:var(--muted);font-size:13px;margin-top:4px}
form{margin-top:14px}label{display:block;font-weight:700;margin:10px 0 6px;color:var(--muted);font-size:13px}
input,select,button,textarea{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:#06121b;color:var(--text);outline:none;font-size:15px}
select.opt{appearance:none;padding-right:40px}
.small{font-size:13px;color:var(--muted);margin-top:10px}
.btn{margin-top:12px;display:inline-flex;align-items:center;justify-content:center;gap:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#001018;border:none;padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer}
.btn:active{transform:translateY(1px)}
.spinner{width:18px;height:18px;border-radius:50%;border:3px solid rgba(255,255,255,0.3);border-top-color:white;animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.panel{margin-top:12px;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;font-size:13px;color:var(--muted)}
.results{margin-top:12px;background:#041019;border-radius:10px;padding:12px;max-height:320px;overflow:auto;font-family:monospace;font-size:13px}
footer{text-align:center;color:var(--muted);font-size:13px;margin-top:12px}
.small-inline{display:inline-block;font-size:12px;color:var(--muted);margin-left:8px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div class="logo" aria-hidden="true">FF</div>
        <div>
          <h1>Free Fire Likes Tool â€” Local</h1>
          <div class="powered">powered by <strong>sheikh zada</strong></div>
        </div>
      </header>

      <form id="form" autocomplete="off" style="margin-top:14px">
        <label for="uid">Target UID</label>
        <input id="uid" type="text" placeholder="e.g. 2955590815" required>

        <label for="region" style="margin-top:8px">Target Server</label>
        <select id="region" class="opt">
          <option value="PK">ðŸ‡µðŸ‡° Pakistan</option>
          <option value="IN">ðŸ‡®ðŸ‡³ India</option>
          <option value="BD">ðŸ‡§ðŸ‡© Bangladesh</option>
          <option value="BR">ðŸ‡§ðŸ‡· Brazil</option>
          <option value="SG">ðŸ‡¸ðŸ‡¬ Singapore</option>
          <option value="ID">ðŸ‡®ðŸ‡© Indonesia</option>
          <option value="US">ðŸ‡ºðŸ‡¸ United States</option>
        </select>

        <label style="margin-top:10px">Upload tokens JSON (local only)</label>
        <input id="tokensFile" type="file" accept=".json,application/json">

        <div class="panel">
          <div><strong>Provider URL</strong> â€” where requests will be sent (you can use your provider)</div>
          <input id="providerUrl" type="text" value="https://proapis.hlgamingofficial.com/main/games/freefire/likes/api" />
          <div style="margin-top:8px"><strong>Request style</strong>:
            <select id="authStyle" style="width:auto;display:inline-block">
              <option value="field">field (useruid + api)</option>
              <option value="query">query params (likes.ffgarena)</option>
              <option value="bearer">bearer header</option>
            </select>
            <span class="small-inline">Choose depending on your provider</span>
          </div>

          <div style="margin-top:8px">
            <label><input id="autoStopOnSuccess" type="checkbox" checked> Stop when one token succeeds</label>
            <label style="margin-left:12px"><input id="shuffleTokens" type="checkbox"> Shuffle token order</label>
          </div>

          <div style="margin-top:8px">
            <label>Delay between attempts (ms)</label>
            <input id="delayMs" type="number" value="800" min="50" />
          </div>
        </div>

        <button id="startBtn" class="btn" type="button"><span id="btnText">Start</span></button>
        <button id="stopBtn" class="btn" type="button" style="background:#ef4444;color:#fff;margin-left:8px">Stop</button>

        <div class="small" style="margin-top:8px">This page runs locally: tokens are read from a file you upload and never sent to any server except the provider.</div>
      </form>

      <div class="results" id="results" aria-live="polite"></div>
      <footer>Â© <strong>sheikh zada</strong></footer>
    </div>
  </div>

<script>
(() => {
  const tokensFileInput = document.getElementById('tokensFile');
  const startBtn = document.getElementById('startBtn');
  const stopBtn = document.getElementById('stopBtn');
  const resultsEl = document.getElementById('results');
  const providerUrlInput = document.getElementById('providerUrl');
  const authStyleEl = document.getElementById('authStyle');
  const delayInput = document.getElementById('delayMs');
  const autoStopOnSuccess = document.getElementById('autoStopOnSuccess');
  const shuffleTokensEl = document.getElementById('shuffleTokens');

  let tokens = [];
  let running = false;
  let controller = null; // for aborting fetches

  function appendLog(line){
    const d = document.createElement('div');
    d.innerHTML = line;
    resultsEl.prepend(d);
  }

  function parseTokensArray(arr){
    // Normalize token items to object { id, token }
    return arr.map((it, i) => {
      if(typeof it === 'string') return { id: `tok-${i}`, token: it };
      if(it && (it.token || it.api || it.key)) {
        return { id: it.uid || it.id || `tok-${i}`, token: it.token || it.api || it.key };
      }
      // fallback: full object stringified as token
      return { id: it.uid || it.id || `tok-${i}`, token: JSON.stringify(it) };
    });
  }

  tokensFileInput.addEventListener('change', (e)=>{
    const f = e.target.files[0];
    if(!f) return;
    const reader = new FileReader();
    reader.onload = () => {
      try {
        const parsed = JSON.parse(reader.result);
        if(!Array.isArray(parsed)) {
          appendLog('<span style="color:orange">Tokens file must be a JSON array of tokens.</span>');
          return;
        }
        tokens = parseTokensArray(parsed);
        appendLog(`<span style="color:lightgreen">Loaded ${tokens.length} token entries from file.</span>`);
      } catch(err) {
        appendLog(`<span style="color:tomato">Failed to parse JSON file: ${err.message}</span>`);
      }
    };
    reader.readAsText(f);
  });

  function shuffle(a){
    for(let i=a.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [a[i],a[j]]=[a[j],a[i]];
    }
    return a;
  }

  async function tryToken(tokenObj, uid, region, providerUrl, amount, authStyle) {
    // tokenObj: {id, token}
    // Two provider styles supported:
    // - field: POST JSON { useruid, api, region, ff_uid }
    // - bearer: POST JSON with Authorization Bearer <token>
    // - query: GET to likes.ffgarena.cloud with auth as query param
    const id = tokenObj.id;
    const token = tokenObj.token;
    const summary = { id, ok: false, status: null, text: null, json: null };

    try {
      controller = new AbortController();
      const signal = controller.signal;
      if(authStyle === 'field') {
        const body = { useruid: id, api: token, region, ff_uid: Number(uid) };
        // some providers also accept amount field named 'amount'
        body.amount = amount;
        const resp = await fetch(providerUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body),
          signal
        });
        summary.status = resp.status;
        const text = await resp.text();
        summary.text = text.slice(0,2000);
        try { summary.json = JSON.parse(text); } catch(e){}
        // heuristics for success
        if(summary.json && (summary.json.status === 200) && summary.json.sent && summary.json.sent !== '0 likes') {
          summary.ok = true;
        } else if(resp.status === 200 && summary.json && summary.json.sent && summary.json.sent !== '0 likes') {
          summary.ok = true;
        }
      } else if(authStyle === 'bearer') {
        const resp = await fetch(providerUrl, {
          method: 'POST',
          headers: { 'Content-Type':'application/json', 'Authorization': `Bearer ${token}` },
          body: JSON.stringify({ ff_uid: Number(uid), region, amount }),
          signal
        });
        summary.status = resp.status;
        const text = await resp.text();
        summary.text = text.slice(0,2000);
        try { summary.json = JSON.parse(text); } catch(e){}
        if(summary.json && summary.json.status===200 && summary.json.sent && summary.json.sent!=='0 likes') summary.ok = true;
      } else { // query (likes.ffgarena.cloud)
        const qs = new URLSearchParams({ uid: uid, amount_of_likes: String(amount), auth: token, region });
        const url = (providerUrl || 'https://likes.ffgarena.cloud/api/v2/likes') + '?' + qs.toString();
        const resp = await fetch(url, { method: 'GET', signal });
        summary.status = resp.status;
        const text = await resp.text();
        summary.text = text.slice(0,2000);
        try { summary.json = JSON.parse(text); } catch(e){}
        if(summary.json && summary.json.status===200 && summary.json.sent && summary.json.sent!=='0 likes') summary.ok = true;
      }
    } catch (err) {
      summary.status = summary.status || 0;
      summary.text = err.message;
    } finally {
      controller = null;
    }
    return summary;
  }

  startBtn.addEventListener('click', async ()=>{
    if(running) return;
    const uid = document.getElementById('uid').value.trim();
    const region = document.getElementById('region').value;
    if(!uid){ appendLog('<span style="color:tomato">Enter a target UID first.</span>'); return; }
    if(!tokens || tokens.length===0){ appendLog('<span style="color:tomato">Upload a tokens JSON file first.</span>'); return; }

    running = true;
    startBtn.disabled = true;
    stopBtn.disabled = false;
    resultsEl.innerHTML = '';

    let tokenList = tokens.slice();
    if(shuffleTokensEl.checked) tokenList = shuffle(tokenList);

    const providerUrl = providerUrlInput.value.trim() || 'https://proapis.hlgamingofficial.com/main/games/freefire/likes/api';
    const authStyle = authStyleEl.value;
    const delay = Math.max(50, Number(delayInput.value) || 700);
    const stopOnSuccess = autoStopOnSuccess.checked;

    appendLog(`<span style="color:lightblue">Starting attempts â€” ${tokenList.length} tokens (style: ${authStyle})</span>`);

    for(let i=0;i<tokenList.length && running;i++){
      const tokenObj = tokenList[i];
      const amount = Math.floor(Math.random()*11)+190; // 190-200
      appendLog(`<strong>Trying token:</strong> ${tokenObj.id} â€” amount ${amount}`);
      const result = await tryToken(tokenObj, uid, region, providerUrl, amount, authStyle);
      const ok = result.ok ? '<span style="color:lightgreen">SUCCESS</span>' : `<span style="color:orange">FAIL</span>`;
      const out = `<div><strong>${tokenObj.id}</strong> â€” ${ok} â€” status:${result.status} â€” ${result.text ? result.text.replace(/</g,'&lt;').slice(0,240) : ''}</div>`;
      appendLog(out);

      if(result.ok && stopOnSuccess){
        appendLog('<span style="color:lightgreen">Stopped because a token succeeded.</span>');
        break;
      }

      // small delay between attempts
      await new Promise(r => setTimeout(r, delay));
    }

    appendLog('<span style="color:lightblue">Finished attempts.</span>');
    running = false;
    startBtn.disabled = false;
    stopBtn.disabled = true;
  });

  stopBtn.addEventListener('click', ()=>{
    running = false;
    if(controller) controller.abort();
    appendLog('<span style="color:tomato">Execution stopped by user.</span>');
    startBtn.disabled = false;
    stopBtn.disabled = true;
  });

})();
</script>
</body>
</html>
